<Window x:Class="Buddie.FloatingWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:Buddie"
        xmlns:controls="clr-namespace:Buddie.Controls"
        xmlns:loc="clr-namespace:Buddie.Localization"
        x:Uid="App_MainWindow"
        Title="{loc:Resx App_Title}"
        Width="500"
        Height="860"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        Topmost="{Binding AppSettings.IsTopmost}"
        ResizeMode="NoResize"
        ShowInTaskbar="{Binding AppSettings.ShowInTaskbar}"
        WindowStartupLocation="CenterScreen">
    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/Resources/SharedResources.xaml"/>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Window.Resources>
    
    
    <Grid>
        <!-- 错误通知容器 -->
        <StackPanel x:Name="ErrorNotificationContainer"
                   VerticalAlignment="Top"
                   HorizontalAlignment="Center"
                   Margin="0,10,0,0"
                   Panel.ZIndex="1000"/>
        
        <!-- 卡片控件 -->
        <controls:CardControl x:Name="cardControl"
                              DialogCommand="{Binding ToggleDialogCommand}"
                              BuddieCommand="{Binding ToggleRealtimeCommand}"
                              SettingsCommand="{Binding ToggleSettingsCommand}"
                              IsDialogOpen="{Binding IsDialogVisible}"
                              IsSettingsOpen="{Binding IsSettingsVisible}"
                              IsBuddieOpen="{Binding IsRealtimeOpen}"
                              PreviousCardCommand="{Binding PreviousCardCommand}"
                              NextCardCommand="{Binding NextCardCommand}"/>
        
        <!-- 对话界面 -->
        <controls:DialogControl x:Name="DialogControl"
                                Visibility="{Binding DataContext.IsDialogVisible, RelativeSource={RelativeSource AncestorType=Window}, Converter={StaticResource BooleanToVisibilityConverter}}"/>
        
        <!-- 设置界面 -->
        <controls:SettingsControl x:Name="SettingsControl"
                                  Visibility="{Binding DataContext.IsSettingsVisible, RelativeSource={RelativeSource AncestorType=Window}, Converter={StaticResource BooleanToVisibilityConverter}}"/>

    </Grid>
</Window>
