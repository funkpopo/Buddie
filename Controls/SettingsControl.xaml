<UserControl x:Class="Buddie.Controls.SettingsControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:local="clr-namespace:Buddie.Controls"
             xmlns:controls="clr-namespace:Buddie.Controls">
    
    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/Resources/SharedResources.xaml"/>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </UserControl.Resources>
    
    <!-- 设置界面 - 位于左上角 -->
    <Border x:Name="SettingsInterface"
            Width="460"
            Height="700"
            Background="White"
            CornerRadius="10"
            HorizontalAlignment="Left"
            VerticalAlignment="Top"
            Margin="20,20,0,0"
            Effect="{StaticResource CardShadow}"
            Visibility="Collapsed">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="40"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>
            <!-- 设置界面标题栏 -->
            <Border Grid.Row="0"
                    Background="#F0F0F0"
                    CornerRadius="10,10,0,0">
                <Grid>
                    <TextBlock Text="设置"
                               Foreground="Black"
                               VerticalAlignment="Center"
                               HorizontalAlignment="Left"
                               Margin="15,0,0,0"
                               FontWeight="Bold"/>
                    <Button Content="×"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Center"
                            Width="20"
                            Height="20"
                            Margin="0,0,10,0"
                            Background="Transparent"
                            Foreground="Black"
                            BorderThickness="0"
                            FontSize="14"
                            FontWeight="Bold"
                            Click="CloseSettings_Click"
                            Cursor="Hand"/>
                </Grid>
            </Border>
            <!-- 设置内容区域 -->
            <TabControl Grid.Row="1"
                        Margin="10"
                        Background="Transparent"
                        BorderThickness="0">
                <TabControl.Resources>
                    <Style TargetType="TabItem" BasedOn="{StaticResource CustomTabItemStyle}"/>
                </TabControl.Resources>
                <!-- 基本设置页 -->
                <TabItem Header="基本设置">
                    <ScrollViewer VerticalScrollBarVisibility="Auto">
                        <StackPanel Margin="15">
                            <TextBlock Text="外观设置"
                                       FontWeight="Bold"
                                       Margin="0,0,0,10"
                                       Foreground="Black"/>
                            <CheckBox x:Name="TopMostCheckBox"
                                      Content="始终置顶"
                                      IsChecked="True"
                                      Margin="0,5"
                                      Foreground="Black"
                                      Checked="TopMostCheckBox_Changed"
                                      Unchecked="TopMostCheckBox_Changed"/>
                            <CheckBox x:Name="ShowInTaskbarCheckBox"
                                      Content="在任务栏显示"
                                      IsChecked="True"
                                      Margin="0,5"
                                      Foreground="Black"
                                      Checked="ShowInTaskbarCheckBox_Changed"
                                      Unchecked="ShowInTaskbarCheckBox_Changed"/>
                            <CheckBox x:Name="DarkThemeCheckBox"
                                      Content="夜间模式"
                                      IsChecked="{Binding IsDarkTheme, Mode=TwoWay}"
                                      Margin="0,5"
                                      Foreground="Black"
                                      Checked="DarkThemeCheckBox_Changed"
                                      Unchecked="DarkThemeCheckBox_Changed"/>
                            <Separator Margin="0,15"/>
                            <TextBlock Text="其他设置"
                                       FontWeight="Bold"
                                       Margin="0,0,0,10"
                                       Foreground="Black"/>
                            <Button Content="重置所有设置"
                                    Background="#FF6B6B"
                                    Foreground="White"
                                    BorderThickness="0"
                                    Padding="10,5"
                                    Margin="0,10,0,0"
                                    Click="ResetSettings_Click"
                                    Cursor="Hand"
                                    Style="{StaticResource RoundedButtonStyle}"/>
                        </StackPanel>
                    </ScrollViewer>
                </TabItem>
                <!-- 对话模型设置页 -->
                <TabItem Header="对话模型设置">
                    <ScrollViewer VerticalScrollBarVisibility="Auto">
                        <controls:ApiConfigControl x:Name="ApiConfigControl"/>
                    </ScrollViewer>
                </TabItem>
                <!-- TTS设置页 -->
                <TabItem Header="TTS设置">
                    <ScrollViewer VerticalScrollBarVisibility="Auto">
                        <controls:TtsConfigControl x:Name="TtsConfigControl"/>
                    </ScrollViewer>
                </TabItem>
            </TabControl>
        </Grid>
    </Border>
</UserControl>