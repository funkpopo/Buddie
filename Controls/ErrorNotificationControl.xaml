<UserControl x:Class="Buddie.Controls.ErrorNotificationControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:loc="clr-namespace:Buddie.Localization"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="120" d:DesignWidth="400"
             Background="Transparent">

    <Grid>
        <Border Name="NotificationBorder" 
                CornerRadius="12" 
                Background="#FF2D2D30" 
                BorderBrush="#FF404040" 
                BorderThickness="1"
                Padding="16"
                Opacity="0">
            <Border.Effect>
                <DropShadowEffect Color="Black" Direction="270" ShadowDepth="4" Opacity="0.3" BlurRadius="8"/>
            </Border.Effect>
            
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- 图标 -->
                <TextBlock Name="IconText" 
                          Grid.Row="0" Grid.Column="0"
                          Text="⚠️" 
                          FontSize="20" 
                          Margin="0,0,12,0"
                          VerticalAlignment="Top"/>

                <!-- 主消息 -->
                <TextBlock Name="MainMessage" 
                          Grid.Row="0" Grid.Column="1"
                          Text="{loc:Resx Error_Generic}"
                          FontSize="14"
                          FontWeight="SemiBold"
                          Foreground="#FFFFFFFF"
                          TextWrapping="Wrap"
                          Margin="0,0,12,0"/>

                <!-- 关闭按钮 -->
                <Button Name="CloseButton"
                        Grid.Row="0" Grid.Column="2"
                        Content="✕"
                        Background="Transparent"
                        BorderThickness="0"
                        Foreground="#FFCCCCCC"
                        FontSize="14"
                        Width="20"
                        Height="20"
                        Cursor="Hand"
                        VerticalAlignment="Top"
                        Click="CloseButton_Click">
                    <Button.Style>
                        <Style TargetType="Button">
                            <Setter Property="Background" Value="Transparent"/>
                            <Style.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter Property="Background" Value="#FF404040"/>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </Button.Style>
                </Button>

                <!-- 详细信息（可折叠） -->
                <StackPanel Name="DetailsPanel" 
                           Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="3"
                           Visibility="Collapsed"
                           Margin="0,8,0,0">
                    <TextBlock Name="DetailsMessage"
                              FontSize="12"
                              Foreground="#FFAAAAAA"
                              TextWrapping="Wrap"
                              Margin="0,0,0,8"/>
                </StackPanel>

                <!-- 操作按钮 -->
                <StackPanel Name="ActionsPanel" 
                           Grid.Row="2" Grid.Column="0" Grid.ColumnSpan="3"
                           Orientation="Horizontal"
                           HorizontalAlignment="Right"
                           Margin="0,8,0,0">
                    
                    <Button Name="DetailsButton"
                            Content="{loc:Resx Error_ViewDetails}"
                            Background="Transparent"
                            BorderBrush="#FF007ACC"
                            BorderThickness="1"
                            Foreground="#FF007ACC"
                            FontSize="11"
                            Padding="8,4"
                            Margin="0,0,8,0"
                            Cursor="Hand"
                            Click="DetailsButton_Click">
                        <Button.Style>
                            <Style TargetType="Button">
                                <Style.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter Property="Background" Value="#FF007ACC"/>
                                        <Setter Property="Foreground" Value="White"/>
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </Button.Style>
                    </Button>

                    <Button Name="ActionButton"
                            Content="{loc:Resx Error_Retry}"
                            Background="#FF007ACC"
                            BorderThickness="0"
                            Foreground="White"
                            FontSize="11"
                            Padding="12,4"
                            Cursor="Hand"
                            Visibility="Collapsed"
                            Click="ActionButton_Click">
                        <Button.Style>
                            <Style TargetType="Button">
                                <Style.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter Property="Background" Value="#FF005A9E"/>
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </Button.Style>
                    </Button>
                </StackPanel>
            </Grid>
        </Border>
    </Grid>
</UserControl>
